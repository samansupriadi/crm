name: deploy the apps
on:
  push:
    branches: ['test']

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Dispatch an action and get the run ID and URL
        uses: codex-/return-dispatch@v1
        id: return_dispatch
        with:
          token: ${{ secrets.REPO_ACCESS_TOKEN }}
          ref: ${{ vars.REPO_OPS }}
          repo: crm-ops
          owner: samansupriadi
          workflow: test.yml
          workflow_inputs: '{ "some_input": "value" }' # Optional
          workflow_timeout_seconds: 120 # Default: 300

      - name: Use the output run ID and URL
        run: |
          echo ${{steps.return_dispatch.outputs.run_id}}
          echo ${{steps.return_dispatch.outputs.run_url}}
